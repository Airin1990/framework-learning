
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Mybatis源码分析 · framework-learning</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-lightbox/css/lightbox.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="Mybatis常见知识点.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"guang19","repo":"framework-learning","type":"star","size":"small"},{"user":"guang19","repo":"framework-learning","type":"fork","size":"small"},{"user":"guang19","type":"follow","width":"230","size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
    

    

    
        
        <li class="header">介绍</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../GitBook_Introduction.html">
            
                <a href="../GitBook_Introduction.html">
            
                    
                    关于本电子书
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../">
            
                <a href="../../">
            
                    
                    关于framework-learning
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">内容</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../jdk_jvm_juc-learning/About.html">
            
                <a href="../jdk_jvm_juc-learning/About.html">
            
                    
                    jdk_jvm_juc部分
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../jdk_jvm_juc-learning/Java常见基础知识点.html">
            
                <a href="../jdk_jvm_juc-learning/Java常见基础知识点.html">
            
                    
                    Java常见基础知识点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../jdk_jvm_juc-learning/对象在内存中的布局.html">
            
                <a href="../jdk_jvm_juc-learning/对象在内存中的布局.html">
            
                    
                    对象在内存中的布局
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../jdk_jvm_juc-learning/Java多线程.html">
            
                <a href="../jdk_jvm_juc-learning/Java多线程.html">
            
                    
                    Java多线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../jdk_jvm_juc-learning/Java并发.html">
            
                <a href="../jdk_jvm_juc-learning/Java并发.html">
            
                    
                    Java并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../jdk_jvm_juc-learning/AQS.html">
            
                <a href="../jdk_jvm_juc-learning/AQS.html">
            
                    
                    AQS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../jdk_jvm_juc-learning/Java集合.html">
            
                <a href="../jdk_jvm_juc-learning/Java集合.html">
            
                    
                    Java集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="../jdk_jvm_juc-learning/IO.html">
            
                <a href="../jdk_jvm_juc-learning/IO.html">
            
                    
                    IO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8" data-path="../jdk_jvm_juc-learning/JVM.html">
            
                <a href="../jdk_jvm_juc-learning/JVM.html">
            
                    
                    JVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9" data-path="../jdk_jvm_juc-learning/简单了解类文件结构.html">
            
                <a href="../jdk_jvm_juc-learning/简单了解类文件结构.html">
            
                    
                    简单了解类文件结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.10" data-path="../jdk_jvm_juc-learning/类的生命周期.html">
            
                <a href="../jdk_jvm_juc-learning/类的生命周期.html">
            
                    
                    类的生命周期(类加载)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.11" data-path="../jdk_jvm_juc-learning/JVM常量池.html">
            
                <a href="../jdk_jvm_juc-learning/JVM常量池.html">
            
                    
                    JVM常量池
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.12" data-path="../jdk_jvm_juc-learning/GC.html">
            
                <a href="../jdk_jvm_juc-learning/GC.html">
            
                    
                    GC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.13" data-path="../jdk_jvm_juc-learning/JVM调优相关内容.html">
            
                <a href="../jdk_jvm_juc-learning/JVM调优相关内容.html">
            
                    
                    JVM调优相关内容
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../rdbms-learning/About.html">
            
                <a href="../rdbms-learning/About.html">
            
                    
                    关系型数据库部分
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../rdbms-learning/RDBMS.html">
            
                <a href="../rdbms-learning/RDBMS.html">
            
                    
                    RDBMS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="../rdbms-learning/RDBMS常见知识点.html">
            
                <a href="../rdbms-learning/RDBMS常见知识点.html">
            
                    
                    RDBMS常见知识点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../rdbms-learning/索引.html">
            
                <a href="../rdbms-learning/索引.html">
            
                    
                    索引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../rdbms-learning/Mysql.html">
            
                <a href="../rdbms-learning/Mysql.html">
            
                    
                    Mysql
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="../rdbms-learning/Mysql存储引擎.html">
            
                <a href="../rdbms-learning/Mysql存储引擎.html">
            
                    
                    Mysql存储引擎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.2" data-path="../rdbms-learning/事务.html">
            
                <a href="../rdbms-learning/事务.html">
            
                    
                    事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.3" data-path="../rdbms-learning/数据库锁.html">
            
                <a href="../rdbms-learning/数据库锁.html">
            
                    
                    数据库锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.4" data-path="../rdbms-learning/Mysql日志.html">
            
                <a href="../rdbms-learning/Mysql日志.html">
            
                    
                    Mysql日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.5" data-path="../rdbms-learning/Mysql优化.html">
            
                <a href="../rdbms-learning/Mysql优化.html">
            
                    
                    Mysql优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.6" data-path="../rdbms-learning/Mysql数据类型.html">
            
                <a href="../rdbms-learning/Mysql数据类型.html">
            
                    
                    Mysql数据类型
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../nosql-learning/About.html">
            
                <a href="../nosql-learning/About.html">
            
                    
                    非关系型数据库部分
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../nosql-learning/NoSQL.html">
            
                <a href="../nosql-learning/NoSQL.html">
            
                    
                    NoSQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../nosql-learning/Redis.html">
            
                <a href="../nosql-learning/Redis.html">
            
                    
                    Redis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="../nosql-learning/Redis常见知识点.html">
            
                <a href="../nosql-learning/Redis常见知识点.html">
            
                    
                    Redis常见知识点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.2" data-path="../nosql-learning/Redis数据结构.html">
            
                <a href="../nosql-learning/Redis数据结构.html">
            
                    
                    Redis数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.3" data-path="../nosql-learning/Redis事务.html">
            
                <a href="../nosql-learning/Redis事务.html">
            
                    
                    Redis事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.4" data-path="../nosql-learning/Redis缓存淘汰策略.html">
            
                <a href="../nosql-learning/Redis缓存淘汰策略.html">
            
                    
                    Redis缓存淘汰策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.5" data-path="../nosql-learning/Redis持久化策略.html">
            
                <a href="../nosql-learning/Redis持久化策略.html">
            
                    
                    Redis持久化策略
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../computer-network/About.html">
            
                <a href="../computer-network/About.html">
            
                    
                    计算机网络部分
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../computer-network/OSI七层模型.html">
            
                <a href="../computer-network/OSI七层模型.html">
            
                    
                    OSI七层模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../computer-network/TCP_IP.html">
            
                <a href="../computer-network/TCP_IP.html">
            
                    
                    TCP/IP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../computer-network/HTTP.html">
            
                <a href="../computer-network/HTTP.html">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../spring-learning/About.html">
            
                <a href="../spring-learning/About.html">
            
                    
                    Spring框架部分
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../spring-learning/SpringFramework常见知识点.html">
            
                <a href="../spring-learning/SpringFramework常见知识点.html">
            
                    
                    SpringFramework常见知识点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../spring-learning/SpringMVC常见知识点.html">
            
                <a href="../spring-learning/SpringMVC常见知识点.html">
            
                    
                    SpringMVC常见知识点
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.2.1" data-path="../spring-learning/SpringMVC源码分析.html">
            
                <a href="../spring-learning/SpringMVC源码分析.html">
            
                    
                    SpringMVC源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../spring-learning/SpringBoot常见知识点.html">
            
                <a href="../spring-learning/SpringBoot常见知识点.html">
            
                    
                    SpringBoot常见知识点
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="About.html">
            
                <a href="About.html">
            
                    
                    ORM框架部分
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="ORM.html">
            
                <a href="ORM.html">
            
                    
                    ORM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="Mybatis.html">
            
                <a href="Mybatis.html">
            
                    
                    Mybatis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.2.1" data-path="Mybatis常见知识点.html">
            
                <a href="Mybatis常见知识点.html">
            
                    
                    Mybatis常见知识点
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="7.1.2.2" data-path="Mybatis源码分析.html">
            
                <a href="Mybatis源码分析.html">
            
                    
                    Mybatis源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Mybatis源码分析</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <ul>
<li><a href="#mybatis&#x6E90;&#x7801;&#x5206;&#x6790;">Mybatis&#x6E90;&#x7801;&#x5206;&#x6790;</a><ul>
<li><a href="#1-&#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x521B;&#x5EFA;sqlsessionfactory">1. &#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x521B;&#x5EFA;SQLSessionFactory</a></li>
<li><a href="#2-&#x5F00;&#x542F;java&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x4F1A;&#x8BDD;">2. &#x5F00;&#x542F;java&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x4F1A;&#x8BDD;&#xFF1A;</a></li>
<li><a href="#3-&#x83B7;&#x53D6;mapper&#x4EE3;&#x7406;&#x5BF9;&#x8C61;">3. &#x83B7;&#x53D6;mapper&#x4EE3;&#x7406;&#x5BF9;&#x8C61;:</a></li>
<li><a href="#4-&#x6267;&#x884C;mapper&#x63A5;&#x53E3;&#x65B9;&#x6CD5;">4. &#x6267;&#x884C;mapper&#x63A5;&#x53E3;&#x65B9;&#x6CD5;:</a>   </li>
<li><a href="#mybatis&#x6E90;&#x7801;&#x603B;&#x7ED3;">mybatis&#x6E90;&#x7801;&#x603B;&#x7ED3;</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h1 id="mybatis&#x6E90;&#x7801;&#x5206;&#x6790;">Mybatis&#x6E90;&#x7801;&#x5206;&#x6790;</h1>
<h4 id="1-&#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x521B;&#x5EFA;sqlsessionfactory">1. &#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x521B;&#x5EFA;SQLSessionFactory</h4>
<pre class="language-"><code>InputStream inputStream = CommonTest.class.getClassLoader().getResourceAsStream(&quot;mybatis-configuration.xml&quot;);
SQLSessionFactory SQLSessionFactory =
                new SQLSessionFactoryBuilder().build(inputStream);
</code></pre><p>&#x8FD9;&#x4E00;&#x6B65;&#x9996;&#x5148;&#x8BFB;&#x53D6;&#x4E86;mybatis&#x7684;configuration xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;,&#x7528;&#x8FD9;&#x4E2A;&#x6D41;&#x6784;&#x9020;&#x4E86;Factory&#x7684;Builder,&#x5B83;&#x5E95;&#x5C42;&#x662F;&#x4F7F;&#x7528;Mybatis&#x81EA;&#x5DF1;&#x7684;XMLConfigBuilder&#x89E3;&#x6790;&#x5668;&#x53BB;&#x89E3;&#x6790;&#x4E86;&#x8FD9;&#x4E2A;Configuration&#x6587;&#x4EF6;,
&#x7136;&#x540E;&#x8C03;&#x7528;&#x4E86;&#x89E3;&#x6790;&#x5668;&#x7684;parse&#x65B9;&#x6CD5;,SQLSessionFactory&#x5C31;&#x88AB;&#x6784;&#x9020;&#x51FA;&#x6765;&#x4E86;:</p>
<pre class="language-"><code>   public SQLSessionFactory build(InputStream inputStream, String environment, Properties properties) {
        SQLSessionFactory var5;
        try {

            //&#x6587;&#x4EF6;&#x89E3;&#x6790;&#x5668;
            XMLConfigBuilder parser = new XMLConfigBuilder(inputStream, environment, properties);

            //&#x6784;&#x9020;SQLSessionFactory
            var5 = this.build(parser.parse());

        } catch (Exception var14) {
            throw ExceptionFactory.wrapException(&quot;Error building SQLSession.&quot;, var14);
        } finally {
            ErrorContext.instance().reset();

            try {
                inputStream.close();
            } catch (IOException var13) {
            }

        }

        return var5;
    }
</code></pre><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x77E5;,SQLSessionFactory&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x6838;&#x5FC3;&#x662F; XMLConfigBuilder&#x7684; parse&#x65B9;&#x6CD5;,
&#x4E5F;&#x5C31;&#x662F;&#x89E3;&#x6790;&#x6587;&#x4EF6;&#x7684;&#x90A3;&#x4E2A;&#x6B65;&#x9AA4;,&#x5B83;&#x53C8;&#x662F;&#x600E;&#x4E48;&#x89E3;&#x6790;&#x7684;&#x5462;?</p>
<p>&#x521D;&#x6B21;&#x5B66;Mybatis&#x7684;&#x65F6;&#x5019;,&#x914D;&#x7F6E;&#x7684;&#x90A3;&#x4E2A;Configuration&#x5168;&#x5C40;&#x6587;&#x4EF6;&#x91CC;&#x6709;&#x5F88;&#x591A;&#x5C5E;&#x6027;&#x5BF9;&#x5427;,&#x5404;&#x79CD;&#x8282;&#x70B9;,
environment,mapper,setting...&#x7684;,&#x53EF;&#x60F3;&#x5B83;&#x5185;&#x90E8;&#x80AF;&#x5B9A;&#x662F;&#x5BF9;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x505A;&#x4E86;&#x89E3;&#x6790;&#x7684;:</p>
<pre class="language-"><code>    private void parseConfiguration(XNode root) {
        try {
            this.propertiesElement(root.evalNode(&quot;properties&quot;));
            Properties settings = this.settingsAsProperties(root.evalNode(&quot;settings&quot;));

            //&#x89E3;&#x6790;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5404;&#x4E2A;&#x8282;&#x70B9;,&#x5E76;&#x52A0;&#x8F7D;&#x914D;&#x7F6E;
            this.loadCustomVfs(settings);
            this.loadCustomLogImpl(settings);
            this.typeAliasesElement(root.evalNode(&quot;typeAliases&quot;));
            this.pluginElement(root.evalNode(&quot;plugins&quot;));
            this.objectFactoryElement(root.evalNode(&quot;objectFactory&quot;));
            this.objectWrapperFactoryElement(root.evalNode(&quot;objectWrapperFactory&quot;));
            this.reflectorFactoryElement(root.evalNode(&quot;reflectorFactory&quot;));
            this.settingsElement(settings);
            this.environmentsElement(root.evalNode(&quot;environments&quot;));
            this.databaseIdProviderElement(root.evalNode(&quot;databaseIdProvider&quot;));
            this.typeHandlerElement(root.evalNode(&quot;typeHandlers&quot;));

            //&#x89E3;&#x6790;mapper&#x7684;&#x5404;&#x4E2A;&#x5143;&#x7D20;(SQL,resultmap......)    
            this.mapperElement(root.evalNode(&quot;mappers&quot;));
        } catch (Exception var3) {
            throw new BuilderException(&quot;Error parsing SQL Mapper Configuration. Cause: &quot; + var3, var3);
        }
    }
</code></pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5206;&#x6790;,&#x5176;&#x5B9E;&#x89E3;&#x6790;&#x662F;&#x5927;&#x6982;&#x5206;&#x4E3A;2&#x4E2A;&#x90E8;&#x5206;&#x7684;,&#x4E00;&#x4E2A;&#x662F;&#x89E3;&#x6790;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CC;&#x7684;&#x5C5E;&#x6027;,
&#x4E00;&#x4E2A;&#x662F;&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;&#x7684;&#x5404;&#x4E2A;&#x5C5E;&#x6027;,&#x5BF9;&#x5DF2;&#x7ECF;&#x5B66;&#x8FC7;mybatis&#x7684;&#x540C;&#x5B66;&#x6765;&#x8BF4;,
&#x90FD;&#x77E5;&#x9053;mybatis&#x5E95;&#x5C42;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x6765;&#x64CD;&#x4F5C;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x7684;,&#x90A3;&#x4E48;&#x4ECE;&#x7B2C;&#x4E8C;&#x4E2A;&#x90E8;&#x5206;:&#x89E3;&#x6790;mapper&#x7684;&#x90E8;&#x5206;&#x5C31;&#x5C24;&#x4E3A;&#x91CD;&#x8981;&#x4E86;.</p>
<p>&#x5148;&#x770B;&#x7B2C;&#x4E00;&#x4E2A;&#x90E8;&#x5206;,&#x5176;&#x5B9E;&#x5176;&#x7B2C;&#x4E00;&#x4E2A;&#x90E8;&#x5206;&#x6700;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#x5206;&#x6790;&#x51FA;&#x4E86;,mybatis&#x6240;&#x6709;&#x7684;&#x5C5E;&#x6027;,
&#x914D;&#x7F6E;&#x5168;&#x90E8;&#x7531;&#x4E00;&#x4E2A;Configuration&#x5BF9;&#x8C61;&#x4FDD;&#x5B58;&#x4E86;&#x8D77;&#x6765;,&#x968F;&#x4FBF;&#x62BD;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;:</p>
<pre class="language-"><code>    private void settingsElement(Properties props) {
        this.configuration.setAutoMappingBehavior(AutoMappingBehavior.valueOf(props.getProperty(&quot;autoMappingBehavior&quot;, &quot;PARTIAL&quot;)));
        this.configuration.setAutoMappingUnknownColumnBehavior(AutoMappingUnknownColumnBehavior.valueOf(props.getProperty(&quot;autoMappingUnknownColumnBehavior&quot;, &quot;NONE&quot;)));
        this.configuration.setCacheEnabled(this.booleanValueOf(props.getProperty(&quot;cacheEnabled&quot;), true));
        this.configuration.setProxyFactory((ProxyFactory)this.createInstance(props.getProperty(&quot;proxyFactory&quot;)));
        this.configuration.setLazyLoadingEnabled(this.booleanValueOf(props.getProperty(&quot;lazyLoadingEnabled&quot;), false));
        this.configuration.setAggressiveLazyLoading(this.booleanValueOf(props.getProperty(&quot;aggressiveLazyLoading&quot;), false));
        this.configuration.setMultipleResultSetsEnabled(this.booleanValueOf(props.getProperty(&quot;multipleResultSetsEnabled&quot;), true));
        this.configuration.setUseColumnLabel(this.booleanValueOf(props.getProperty(&quot;useColumnLabel&quot;), true));
        this.configuration.setUseGeneratedKeys(this.booleanValueOf(props.getProperty(&quot;useGeneratedKeys&quot;), false));
        ......

    }
</code></pre><p>&#x518D;&#x770B;&#x770B;Configuration&#x7C7B;&#x7684;&#x5C5E;&#x6027;,&#x5C31;&#x5370;&#x8BC1;&#x4E86;&#x4E4B;&#x524D;&#x8BF4;&#x8FC7;&#x7684;,
Configuration&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x8D2F;&#x7A7F;&#x7684;mybatis&#x6574;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x6838;&#x5FC3;&#x914D;&#x7F6E;&#x7C7B;:</p>
<pre class="language-"><code>public class Configuration {
    protected Environment environment;
    protected boolean safeRowBoundsEnabled;
    protected boolean safeResultHandlerEnabled;
    protected boolean mapUnderscoreToCamelCase;
    protected boolean aggressiveLazyLoading;
    protected boolean multipleResultSetsEnabled;
    protected boolean useGeneratedKeys;
    protected boolean useColumnLabel;
    protected boolean cacheEnabled;
    protected boolean callSettersOnNulls;
    protected boolean useActualParamName;
    protected boolean returnInstanceForEmptyRow;
    protected String logPrefix;
    protected Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>?</span> <span class="token attr-name">extends</span> <span class="token attr-name">Log</span><span class="token punctuation">&gt;</span></span> logImpl;
    protected Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>?</span> <span class="token attr-name">extends</span> <span class="token attr-name">VFS</span><span class="token punctuation">&gt;</span></span> vfsImpl;
    protected LocalCacheScope localCacheScope;
    protected JdbcType jdbcTypeForNull;
    protected Set<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String</span><span class="token punctuation">&gt;</span></span> lazyLoadTriggerMethods;
   ......
   ......
  }
</code></pre><p>&#x4E4B;&#x524D;&#x8BF4;&#x8FC7;,XMLConfigBuilder&#x8D1F;&#x8D23;&#x89E3;&#x6790;mybatis&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;,&#x800C;&#x89E3;&#x6790;&#x9636;&#x6BB5;&#x53C8;&#x5927;&#x81F4;&#x5206;&#x4E3A;2&#x4E2A;&#x9636;&#x6BB5;:&#x89E3;&#x6790;&#x57FA;&#x672C;&#x5C5E;&#x6027;;
&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;.&#x89E3;&#x6790;&#x7684;&#x57FA;&#x672C;&#x5C5E;&#x6027;&#x90FD;&#x5B58;&#x653E;&#x5728;&#x4E86;&#x5168;&#x5C40;&#x7684;Configuration&#x4E4B;&#x4E2D;.
&#x518D;&#x770B;mapperElement&#x65B9;&#x6CD5;,&#x4E5F;&#x5C31;&#x662F;&#x5F00;&#x59CB;&#x89E3;&#x6790;&#x7684;&#x90A3;&#x4E2A;&#x65B9;&#x6CD5;,&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x9501;&#x5B9A;XMLMapperBuilder&#x7C7B;,
&#x770B;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;&#x7684;:</p>
<pre class="language-"><code>    private void mapperElement(XNode parent) throws Exception {
        if (parent != null) {
            Iterator var2 = parent.getChildren().iterator();

            while(true) {
                while(var2.hasNext()) {
                    XNode child = (XNode)var2.next();
                    String resource;
                    if (&quot;package&quot;.equals(child.getName())) {
                        resource = child.getStringAttribute(&quot;name&quot;);
                        this.configuration.addMappers(resource);
                    } else {
                        resource = child.getStringAttribute(&quot;resource&quot;);
                        String url = child.getStringAttribute(&quot;url&quot;);
                        String mapperClass = child.getStringAttribute(&quot;class&quot;);
                        XMLMapperBuilder mapperParser;
                        InputStream inputStream;
                        if (resource != null &amp;&amp; url == null &amp;&amp; mapperClass == null) {
                            ErrorContext.instance().resource(resource);
                            inputStream = Resources.getResourceAsStream(resource);

                            //&#x5F00;&#x59CB;&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;
                            mapperParser = new XMLMapperBuilder(inputStream, this.configuration, resource, this.configuration.getSQLFragments());
                            mapperParser.parse();

                           } else if (resource == null &amp;&amp; url != null &amp;&amp; mapperClass == null) {
                            ErrorContext.instance().resource(url);
                            inputStream = Resources.getUrlAsStream(url);
                            mapperParser = new XMLMapperBuilder(inputStream, this.configuration, url, this.configuration.getSQLFragments());
                            mapperParser.parse();
                        } else {
                            if (resource != null || url != null || mapperClass == null) {
                                throw new BuilderException(&quot;A mapper element may only specify a url, resource or class, but not more than one.&quot;);
                            }

                            Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>?</span><span class="token punctuation">&gt;</span></span> mapperInterface = Resources.classForName(mapperClass);
                            this.configuration.addMapper(mapperInterface);
                        }
                    }
                }

                return;
            }
        }
    }
</code></pre><p>&#x5728;&#x8BF4;&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;&#x4E4B;&#x524D;,&#x5148;&#x60F3;&#x60F3;mapper&#x6587;&#x4EF6;&#x91CC;&#x6709;&#x4EC0;&#x4E48;,&#x6700;&#x6838;&#x5FC3;&#x7684;&#x5C31;&#x90A3;&#x51E0;&#x4E2A;:resultMap,statement(&#x4E5F;&#x5C31;&#x662F;SQL),
cache&#x7F13;&#x5B58;,&#x90A3;&#x4E48;XMLMapperBuilder&#x80AF;&#x5B9A;&#x4E5F;&#x662F;&#x56F4;&#x7ED5;&#x90A3;&#x4E2A;&#x51E0;&#x4E2A;&#x53BB;&#x89E3;&#x6790;&#x7684;,&#x6216;&#x8005;&#x8FD8;&#x89E3;&#x6790;&#x4E86;&#x5176;&#x4ED6;&#x7684;&#x4E1C;&#x897F;:</p>
<pre class="language-"><code>    public void parse() {
        if (!this.configuration.isResourceLoaded(this.resource)) {

            //&#x8FD9;&#x91CC;&#x662F;&#x89E3;&#x6790;Mapper&#x6587;&#x4EF6;&#x7684;&#x6838;&#x5FC3;,&#x5B83;&#x5185;&#x90E8;&#x628A;Mapper&#x7684;select,delete,update,insert&#x8FD9;&#x4E9B;
            //&#x6807;&#x7B7E;&#x6DFB;&#x52A0;&#x5230;&#x4E86;MapperStatement&#x5185;,&#x4E5F;&#x5C31;&#x662F;SQL&#x8BED;&#x53E5;
            this.configurationElement(this.parser.evalNode(&quot;/mapper&quot;));

            this.configuration.addLoadedResource(this.resource);

            //&#x8FD9;&#x4E00;&#x6B65;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;,&#x5B83;&#x7ED1;&#x5B9A;&#x4E86;mapper&#x6587;&#x4EF6;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;
            this.bindMapperForNamespace();
        }

        //&#x89E3;&#x6790;&#x8FD8;&#x6CA1;&#x6709;&#x89E3;&#x6790;&#x7684;&#x5404;&#x4E2A;&#x5143;&#x7D20;
        this.parsePendingResultMaps();
        this.parsePendingCacheRefs();
        this.parsePendingStatements();
    }
</code></pre><p>&#x5176;&#x5B9E;mybatis&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;&#x7684;&#x6B65;&#x9AA4;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x6DF1;&#x5165;&#x7684;,&#x8FD9;&#x91CC;&#x7531;&#x4E8E;&#x7BC7;&#x5E45;&#x5173;&#x7CFB;,&#x6015;&#x8BF4;&#x957F;&#x4E86;,&#x5C31;&#x8131;&#x79BB;&#x6B64;&#x6587;&#x7684;&#x76EE;&#x7684;,&#x8FD8;&#x662F;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E3B;,&#x76F4;&#x5230;mybatis&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#x5C31;&#x884C;,&#x4F46;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x53BB;&#x770B;&#x770B;mybatis&#x5230;&#x5E95;&#x662F;&#x5982;&#x4F55;&#x89E3;&#x6790;mapp&#x6587;&#x4EF6;&#x7684;,&#x4E5F;&#x5C31;&#x662F;
&#x4E0A;&#x9762;&#x7684;:</p>
<pre class="language-"><code>this.configurationElement(this.parser.evalNode(&quot;/mapper&quot;));
......
</code></pre><p>&#x6700;&#x540E;,&#x56DE;&#x5230;&#x89E3;&#x6790;Configuration&#x6587;&#x4EF6;&#x7684;&#x8D77;&#x70B9;,&#x89E3;&#x6790;&#x5B8C;&#x6587;&#x4EF6;&#x540E;,SQLSessionFactory&#x5C31;&#x88AB;build&#x65B9;&#x6CD5;&#x6784;&#x9020;&#x51FA;&#x6765;&#x4E86;,&#x5176;&#x5B9E;&#x4ED6;&#x662F;&#x4E2A;DefaultSQLSessionFactory:</p>
<pre class="language-"><code>   public SQLSessionFactory build(Configuration config) {
        return new DefaultSQLSessionFactory(config);
    }
</code></pre><p>&#x603B;&#x7ED3;&#x4E0B;SQLSessionFactory&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x8FC7;&#x7A0B;: 
&#x9996;&#x5148;Mybatis&#x4F7F;&#x7528;XMLConfigBuilder&#x6587;&#x4EF6;&#x89E3;&#x6790;&#x5668;,&#x89E3;&#x6790;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;,XMLMapperBuilder,&#x89E3;&#x6790;mapper&#x6587;&#x4EF6;,&#x89E3;&#x6790;&#x5B8C;&#x540E;&#x5C06;&#x6240;&#x6709;&#x7684;&#x5C5E;&#x6027;&#x5C01;&#x88C5;&#x5728;&#x4E86;Configuration&#x5BF9;&#x8C61;&#x4E2D;,&#x7136;&#x540E;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x5168;&#x5C40;&#x7684;Configuration&#x5BF9;&#x8C61;&#x6784;&#x9020;&#x4E86;DefaultSQLSessionFactory.</p>
<h4 id="2-&#x5F00;&#x542F;java&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x4F1A;&#x8BDD;&#xFF1A;">2. &#x5F00;&#x542F;java&#x7A0B;&#x5E8F;&#x548C;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x4F1A;&#x8BDD;&#xFF1A;</h4>
<pre class="language-"><code>   SQLSession SQLSession = SQLSessionFactory.openSession();
</code></pre><p>&#x4ECE;&#x7B2C;&#x4E00;&#x6B65;&#x521B;&#x5EFA;SQLSessionFactory&#x7684;&#x8FC7;&#x7A0B;&#x53EF;&#x77E5;,SQLSessionFactory&#x662F;&#x4E00;&#x4E2A;DefaultSQLSessionFactory,&#x6240;&#x4EE5;openSession&#x4E5F;&#x662F;&#x8C03;&#x7528;&#x4E86;DefaultSQLSessionFactory&#x7684;openSession:</p>
<pre class="language-"><code>   public SQLSession openSession() {
        return this.openSessionFromDataSource(this.configuration.getDefaultExecutorType(), (TransactionIsolationLevel)null, false);
    }
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;openSession&#x662F;&#x8C03;&#x7528;&#x4E86;openSessionFromDataSource&#x65B9;&#x6CD5;,&#x90A3;&#x5B83;&#x662F;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x7684;&#x5462;:</p>
<pre class="language-"><code>    private SQLSession openSessionFromDataSource(ExecutorType execType, TransactionIsolationLevel level, boolean autoCommit) {
        Transaction tx = null;

        DefaultSQLSession var8;
        try {
            Environment environment = this.configuration.getEnvironment();

            //&#x4E8B;&#x7269;&#x7BA1;&#x7406;
            TransactionFactory transactionFactory = this.getTransactionFactoryFromEnvironment(environment);
            tx = transactionFactory.newTransaction(environment.getDataSource(), level, autoCommit);

            //&#x6838;&#x5FC3;Executor&#x6267;&#x884C;&#x5668;
            Executor executor = this.configuration.newExecutor(tx, execType);

            //SQLSession&#x5C31;&#x662F;DefaultSQLSession
            var8 = new DefaultSQLSession(this.configuration, executor, autoCommit);
        } catch (Exception var12) {
            this.closeTransaction(tx);
            throw ExceptionFactory.wrapException(&quot;Error opening session.  Cause: &quot; + var12, var12);
        } finally {
            ErrorContext.instance().reset();
        }
</code></pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x51FA;,SQLSession&#x662F;DefaultSQLSession,&#x7136;&#x540E;&#x8FD8;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;Executor&#x8FD9;&#x4E2A;&#x6838;&#x5FC3;&#x7684;&#x6267;&#x884C;&#x5668;&#x5BF9;&#x8C61;,&#x90A3;&#x4E48;&#x9996;&#x5148;&#x770B;&#x770B;&#x8FD9;&#x4E2A;Executor&#x662F;&#x4EC0;&#x4E48;,&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x5B83;&#x662F;&#x6838;&#x5FC3;&#x5462;&#xFF1F;
&#x9996;&#x5148;&#x770B;&#x770B;&#x5B83;&#x5185;&#x90E8;&#x7684;&#x65B9;&#x6CD5;&#x5427;:</p>
<pre class="language-"><code>public interface Executor {
    ResultHandler NO_RESULT_HANDLER = null;

    int update(MappedStatement var1, Object var2) throws SQLException;

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> query(MappedStatement var1, Object var2, RowBounds var3, ResultHandler var4, CacheKey var5, BoundSQL var6) throws SQLException;

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> query(MappedStatement var1, Object var2, RowBounds var3, ResultHandler var4) throws SQLException;

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> Cursor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> queryCursor(MappedStatement var1, Object var2, RowBounds var3) throws SQLException;

    List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BatchResult</span><span class="token punctuation">&gt;</span></span> flushStatements() throws SQLException;

    void commit(boolean var1) throws SQLException;

    void rollback(boolean var1) throws SQLException;
    ...
    ...
}
</code></pre><p>&#x4ECE;Executor&#x5185;&#x90E8;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x770B;&#x51FA;,&#x5B83;&#x8D1F;&#x8D23;&#x6267;&#x884C;Statement&#x7684;&#x6267;&#x884C;&#x64CD;&#x4F5C;.&#x65E2;&#x7136;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;,&#x90A3;&#x4E48;&#x5FC5;&#x7136;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;,&#x8FD9;&#x91CC;&#x5148;&#x770B;configuration&#x7684;newExecutor&#x65B9;&#x6CD5;&#x662F;&#x600E;&#x4E48;&#x521B;&#x5EFA;&#x5B83;&#x7684;&#x5427;:</p>
<pre class="language-"><code>    public Executor newExecutor(Transaction transaction, ExecutorType executorType) {
        executorType = executorType == null ? this.defaultExecutorType : executorType;
        executorType = executorType == null ? ExecutorType.SIMPLE : executorType;
        Object executor;

        //&#x6279;&#x5904;&#x7406;&#x7684;Executor
        if (ExecutorType.BATCH == executorType) {
            executor = new BatchExecutor(this, transaction);
        }
        //&#x53EF;&#x590D;&#x7528;&#x7684;Executor
        else if (ExecutorType.REUSE == executorType) {
            executor = new ReuseExecutor(this, transaction);
        } 
        //&#x7B80;&#x5355;&#x7684;Executor,&#x5982;&#x679C;&#x4E0D;&#x505A;&#x914D;&#x7F6E;,&#x90A3;&#x4E48;&#x5C31;&#x9ED8;&#x8BA4;&#x662F;&#x5B83;&#x4E86;
        else {
            executor = new SimpleExecutor(this, transaction);
        }

        //&#x7F13;&#x5B58;Executor,&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x7684;&#x5173;&#x952E;&#x4E4B;&#x5904;,&#x628A;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x597D;&#x7684;Executor,&#x88C5;&#x6210;CachingExecutor
        if (this.cacheEnabled) {
            executor = new CachingExecutor((Executor)executor);
        }
        //&#x63D2;&#x4EF6;&#x62D3;&#x5C55;,&#x539F;&#x6765;&#x63D2;&#x4EF6;&#x662F;&#x5728;&#x521B;&#x5EFA;Executor&#x7684;&#x65F6;&#x5019;&#x88AB;&#x5C01;&#x88C5;&#x7684;.
        Executor executor = (Executor)this.interceptorChain.pluginAll(executor);
        return executor;
    }
</code></pre><p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x51FA;:&#x521B;&#x5EFA;SQLSession&#x7684;&#x65F6;&#x673A;&#x5176;&#x5B9E;&#x662F;&#x521B;&#x5EFA;Executor&#x7684;&#x65F6;&#x673A;,&#x4E5F;&#x662F;&#x5C01;&#x88C5;plugin&#x7684;&#x65F6;&#x673A;,
&#x4E5F;&#x53EF;&#x4EE5;&#x731C;&#x6D4B;Executor&#x5C31;&#x662F;Mybatis&#x7684;&#x6838;&#x5FC3;&#x7EC4;&#x4EF6;&#x4E4B;&#x4E00;,&#x8D1F;&#x8D23;&#x6267;&#x884C;&#x4E00;&#x7CFB;&#x5217;&#x7684;SQL(Statement).</p>
<p>&#x603B;&#x7ED3;&#x4E0B;&#x7B2C;&#x4E8C;&#x6B65;&#x83B7;&#x53D6;SQLSession&#x7684;&#x8FC7;&#x7A0B;:
&#x4F7F;&#x7528;DefaultSQLSessionFactory&#x7684;Configuration&#x521B;&#x5EFA;&#x51FA;&#x5BF9;&#x5E94;&#x7C7B;&#x578B;&#x7684;Executor,
&#x5E76;&#x5C01;&#x88C5;&#x914D;&#x7F6E;&#x4E2D;&#x7684;&#x63D2;&#x4EF6;,&#x518D;&#x4F7F;&#x7528;Executor&#x548C;Configuration&#x521B;&#x5EFA;DefaultSQLSession,
&#x7531;&#x6B64;&#x53EF;&#x89C1;Configuration&#x4ECE;&#x88AB;&#x6784;&#x5EFA;&#x51FA;&#x6765;,&#x6D41;&#x8F6C;&#x5230;&#x4E86;DefaultSQLSession&#x4E4B;&#x4E2D;.</p>
<h4 id="3-&#x83B7;&#x53D6;mapper&#x4EE3;&#x7406;&#x5BF9;&#x8C61;">3. &#x83B7;&#x53D6;mapper&#x4EE3;&#x7406;&#x5BF9;&#x8C61;:</h4>
<pre class="language-"><code>        PersonMapper personMapper = SQLSession.getMapper(PersonMapper.class);
</code></pre><p>&#x5DF2;&#x7ECF;&#x77E5;&#x5230;&#x4E86;&#x4E0A;&#x9762;&#x8FD4;&#x56DE;&#x7684;PersonMapper&#x662F;&#x4E00;&#x4E2A;MapperProxy&#x5BF9;&#x8C61;,&#x90A3;&#x4E48;&#x5B83;&#x662F;&#x600E;&#x4E48;&#x88AB;&#x521B;&#x5EFA;&#x51FA;&#x6765;&#x7684;&#x5462;?
&#x56DE;&#x60F3;&#x4E0B;&#x4E0A;&#x9762;&#x7684;&#x51E0;&#x4E2A;&#x6B65;&#x9AA4;,DefaultSQLSession&#x5305;&#x542B;&#x4E86;Configuration,&#x800C;Configuration&#x662F;&#x89E3;&#x6790;&#x7684;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C;mapper&#x6587;&#x4EF6;&#x88AB;&#x6784;&#x9020;&#x51FA;&#x6765;&#x7684;,Configuration&#x4E5F;&#x5305;&#x542B;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x5C5E;&#x6027;,
&#x6240;&#x4EE5;MapperProxy&#x5E94;&#x8BE5;&#x4E5F;&#x662F;&#x4ECE;Configuration&#x83B7;&#x53D6;:</p>
<pre class="language-"><code> public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> T getMapper(Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> type) {
        return this.configuration.getMapper(type, this);
    }

-----------------------------------------------------------
   public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> T getMapper(Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> type, SQLSession SQLSession) {
        return this.mapperRegistry.getMapper(type, SQLSession);
    }
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6700;&#x7EC8;&#x662F;&#x7531;MapperRegistry&#x5BF9;&#x8C61;&#x83B7;&#x53D6;&#x7684;,&#x90A3;MapperRegistry&#x662F;&#x5982;&#x4F55;&#x83B7;&#x53D6;&#x7684;&#x5462;:</p>
<pre class="language-"><code>    ...
    private final Map&lt;Class<span class="token prolog">&lt;?&gt;, MapperProxyFactory&lt;?&gt;</span>&gt; knownMappers = new HashMap();

    public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> T getMapper(Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> type, SQLSession SQLSession) {
        //&#x83B7;&#x53D6;mapper&#x63A5;&#x53E3;&#x5BF9;&#x5E94;&#x7684;&#x5DE5;&#x5382;
        MapperProxyFactory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> mapperProxyFactory = (MapperProxyFactory)this.knownMappers.get(type);
        if (mapperProxyFactory == null) {
            throw new BindingException(&quot;Type &quot; + type + &quot; is not known to the MapperRegistry.&quot;);
        } else {
            try {
                //&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x521B;&#x5EFA;mapper&#x63A5;&#x53E3;
                return mapperProxyFactory.newInstance(SQLSession);
            } catch (Exception var5) {
                throw new BindingException(&quot;Error getting mapper instance. Cause: &quot; + var5, var5);
            }
        }
    }
</code></pre><p>MapperRegistry&#x5185;&#x90E8;&#x6709;&#x4E00;&#x4E2A;map,&#x4FDD;&#x5B58;&#x7740;mapper&#x63A5;&#x53E3;&#x7684;class&#x5230;&#x76F8;&#x5E94;&#x7684;MapperProxyFactory&#x7684;&#x5DE5;&#x5382;,&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x67D0;&#x4E2A;mapper&#x63A5;&#x53E3;&#x7684;&#x65F6;&#x5019;,&#x5C31;&#x5229;&#x7528;&#x76F8;&#x5BF9;&#x7684;&#x5DE5;&#x5382;&#x521B;&#x5EFA;mapper&#x63A5;&#x53E3;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;.</p>
<p>&#x9700;&#x8981;&#x641E;&#x6E05;&#x695A;&#x7684;&#x662F;MapperProxyFactory&#x662F;&#x5982;&#x4F55;&#x521B;&#x5EFA;Mapper&#x63A5;&#x53E3;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x5462;?&#x76F4;&#x63A5;&#x9501;&#x5B9A;newInstance&#x65B9;&#x6CD5;:</p>
<pre class="language-"><code>    protected T newInstance(MapperProxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> mapperProxy) {
        //jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;
        return Proxy.newProxyInstance(this.mapperInterface.getClassLoader(), new Class[]{this.mapperInterface}, mapperProxy);
    }

    public T newInstance(SQLSession SQLSession) {
        //&#x9996;&#x5148;&#x521B;&#x5EFA;MapperProxy&#x5BF9;&#x8C61;,MapperProxy&#x5BF9;&#x8C61;&#x5B9E;&#x73B0;&#x4E86;InvocationalHandler&#x63A5;&#x53E3;,&#x6240;&#x4EE5;&#x5B83;&#x53EF;&#x4EE5;&#x88AB;jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;
        MapperProxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> mapperProxy = new MapperProxy(SQLSession, this.mapperInterface, this.methodCache);
        return this.newInstance(mapperProxy);
    }
</code></pre><p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x89E3;&#x91CA;&#x4E86;,&#x76F4;&#x63A5;&#x603B;&#x7ED3;&#x7B2C;3&#x6B65;&#x5427;:
Configuration&#x4ECE;MapperRegistry&#x91CC;&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;Mapper&#x63A5;&#x53E3;&#x7684;&#x4EE3;&#x7406;&#x5DE5;&#x5382;MapperProxyFactory,MapperProxyFactory&#x4F7F;&#x7528;jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x521B;&#x5EFA;Mapper&#x63A5;&#x53E3;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;.</p>
<h4 id="4-&#x6267;&#x884C;mapper&#x63A5;&#x53E3;&#x65B9;&#x6CD5;">4. &#x6267;&#x884C;mapper&#x63A5;&#x53E3;&#x65B9;&#x6CD5;:</h4>
<pre class="language-"><code>  personMapper.selectPersonById(1L);
</code></pre><p>&#x4E0A;&#x9762;&#x5206;&#x6790;&#x5230;&#x7531;SQLSession&#x83B7;&#x53D6;&#x7684;Mapper&#x5BF9;&#x8C61;&#x5176;&#x5B9E;&#x662F;MapperProxyFactory&#x521B;&#x5EFA;&#x7684;MapperProxy&#x4EE3;&#x7406;&#x5BF9;&#x8C61;,&#x90A3;&#x4E48;SQL&#x4EE3;&#x7801;&#x7684;&#x6267;&#x884C;&#x4E5F;&#x80AF;&#x5B9A;&#x662F;&#x5728;MapperProxy&#x7C7B;&#x7684;invoke&#x4E2D;&#x4E86;,&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x9501;&#x5B9A;MapperProxy&#x7C7B;&#x7684;invoke&#x65B9;&#x6CD5;:</p>
<pre class="language-"><code>    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        try {
            //&#x5982;&#x679C;&#x662F;Object&#x7C7B;&#x7684;&#x65B9;&#x6CD5;
            if (Object.class.equals(method.getDeclaringClass())) {
                return method.invoke(this, args);
            }

             //jdk8&#x540E;&#x7684;&#x63A5;&#x53E3;&#x5141;&#x8BB8;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;,&#x6240;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x505A;&#x5224;&#x65AD;
            if (method.isDefault()) {
                if (privateLookupInMethod == null) {
                    return this.invokeDefaultMethodJava8(proxy, method, args);
                }

                return this.invokeDefaultMethodJava9(proxy, method, args);
            }
        } catch (Throwable var5) {
            throw ExceptionUtil.unwrapThrowable(var5);
        }

        MapperMethod mapperMethod = this.cachedMapperMethod(method);
         //&#x771F;&#x6B63;&#x6267;&#x884C;Statement&#x7684;&#x5165;&#x53E3;
        return mapperMethod.execute(this.SQLSession, args);
    }
</code></pre><p>&#x6839;&#x636E;invoke&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x51FA;,invoke&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x7684;&#x4E5F;&#x5C31;&#x662F;MapperMethod&#x7684;execute&#x65B9;&#x6CD5;,&#x90A3;MapperMethod&#x662F;&#x4EC0;&#x4E48;&#x5462;?&#x5148;&#x731C;&#x4E0B;&#xFF1A;&#x5728;mybatis&#x6240;&#x6709;&#x6838;&#x5FC3;&#x7EC4;&#x4EF6;&#x57FA;&#x672C;&#x90FD;&#x662F;xxxHandler&#x547D;&#x540D;,&#x6240;&#x6709;&#x4E0E;&#x63A5;&#x53E3;&#x6709;&#x5173;&#x7684;&#x57FA;&#x672C;&#x90FD;&#x662F;mapperxx&#x547D;&#x540D;,mapperProxy&#x662F;&#x63A5;&#x53E3;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;,mapperMethod&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x63A5;&#x53E3;&#x7684;&#x6267;&#x884C;&#x65B9;&#x6CD5;.
&#x770B;&#x4E0B;mapperProxy&#x7684;&#x5C5E;&#x6027;:</p>
<pre class="language-"><code>public class MapperProxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> implements InvocationHandler, Serializable {
    private static final long serialVersionUID = -6424540398559729838L;
    private static final int ALLOWED_MODES = 15;
    private static final Constructor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lookup</span><span class="token punctuation">&gt;</span></span> lookupConstructor;
    private static final Method privateLookupInMethod;
    private final SQLSession SQLSession;
    private final Class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span> mapperInterface;
    //&#x5B58;&#x50A8;&#x7740;mapperProxy&#x5BF9;&#x5E94;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x6CD5;
    private final Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Method,</span> <span class="token attr-name">MapperMethod</span><span class="token punctuation">&gt;</span></span> methodCache;
        ....
    }
</code></pre><p>&#x518D;&#x770B;&#x521A;&#x624D;&#x5728;invoke&#x65B9;&#x6CD5;&#x91CC;&#x7684;&#x4E00;&#x4E2A;&#x7EC6;&#x8282;:</p>
<pre class="language-"><code>    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
       .....
        //&#x6839;&#x636E;&#x63A5;&#x53E3;&#x8981;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;,&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;mapperMethod
        MapperMethod mapperMethod = this.cachedMapperMethod(method);
        //&#x4F7F;&#x7528;&#x83B7;&#x53D6;&#x5230;&#x7684;mapperMethod&#x6267;&#x884C;SQL
        return mapperMethod.execute(this.SQLSession, args);
    }
</code></pre><p>&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x4E86;,&#x5728;&#x8C03;&#x7528;mapper&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;,mapperProxy&#x5185;&#x90E8;&#x5DF2;&#x7ECF;&#x7EF4;&#x62A4;&#x4E86;&#x5BF9;&#x5E94;&#x63A5;&#x53E3;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;,&#x53EA;&#x7B49;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;execute&#x6267;&#x884C;&#x4E86;.</p>
<p>&#x90A3;mapperMethod&#x662F;&#x5982;&#x4F55;&#x6267;&#x884C;&#x7684;&#x5462;?</p>
<pre class="language-"><code>    public Object execute(SQLSession SQLSession, Object[] args) {
        Object result;
        Object param;
        switch(this.command.getType()) {

         //insert&#x64CD;&#x4F5C;
        case INSERT:
            param = this.method.convertArgsToSQLCommandParam(args);
            result = this.rowCountResult(SQLSession.insert(this.command.getName(), param));
            break;

        //update&#x64CD;&#x4F5C;
        case UPDATE:
            param = this.method.convertArgsToSQLCommandParam(args);
            result = this.rowCountResult(SQLSession.update(this.command.getName(), param));
            break;

        //delete&#x64CD;&#x4F5C;
        case DELETE:
            param = this.method.convertArgsToSQLCommandParam(args);
            result = this.rowCountResult(SQLSession.delete(this.command.getName(), param));
            break;

        //select&#x64CD;&#x4F5C;
        case SELECT:
            if (this.method.returnsVoid() &amp;&amp; this.method.hasResultHandler()) {
                this.executeWithResultHandler(SQLSession, args);
                result = null;
            } else if (this.method.returnsMany()) {
                result = this.executeForMany(SQLSession, args);
            } else if (this.method.returnsMap()) {
                result = this.executeForMap(SQLSession, args);
            } else if (this.method.returnsCursor()) {
                result = this.executeForCursor(SQLSession, args);
            } else {
                param = this.method.convertArgsToSQLCommandParam(args);
                result = SQLSession.selectOne(this.command.getName(), param);
                if (this.method.returnsOptional() &amp;&amp; (result == null || !this.method.getReturnType().equals(result.getClass()))) {
                    result = Optional.ofNullable(result);
                }
            }
            break;

        //flush&#x64CD;&#x4F5C;
        case FLUSH:
            result = SQLSession.flushStatements();
            break;
        default:
            throw new BindingException(&quot;Unknown execution method for: &quot; + this.command.getName());
        }

        if (result == null &amp;&amp; this.method.getReturnType().isPrimitive() &amp;&amp; !this.method.returnsVoid()) {
            throw new BindingException(&quot;Mapper method &apos;&quot; + this.command.getName() + &quot; attempted to return null from a method with a primitive return type (&quot; + this.method.getReturnType() + &quot;).&quot;);
        } else {
            return result;
        }
    }
</code></pre><p>&#x6211;&#x7684;selectPersonById&#x65B9;&#x6CD5;&#x662F;SELECT,&#x5C31;&#x770B;&#x770B;SELECT&#x6267;&#x884C;&#x7684;&#x903B;&#x8F91;&#x5427;&#xFF1A;</p>
<pre class="language-"><code>  case SELECT:
            //&#x5982;&#x679C;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;
            if (this.method.returnsVoid() &amp;&amp; this.method.hasResultHandler()) {
                this.executeWithResultHandler(SQLSession, args);
                result = null;
            }
            //&#x5982;&#x679C;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x96C6;&#x5408;
             else if (this.method.returnsMany()) {
                result = this.executeForMany(SQLSession, args);
            } 
            //&#x5982;&#x679C;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;map
            else if (this.method.returnsMap()) {
                result = this.executeForMap(SQLSession, args);
            }
            //&#x8FD4;&#x56DE;&#x6E38;&#x6807;&#x7C7B;
            else if (this.method.returnsCursor()) {
                result = this.executeForCursor(SQLSession, args);
            } else {
                //&#x6B63;&#x5E38;&#x666E;&#x901A;&#x8FD4;&#x56DE;&#x503C;

                //&#x6293;&#x6362;
                param = this.method.convertArgsToSQLCommandParam(args);
                result = SQLSession.selectOne(this.command.getName(), param);
                if (this.method.returnsOptional() &amp;&amp; (result == null || !this.method.getReturnType().equals(result.getClass()))) {
                    result = Optional.ofNullable(result);
                }
            }
</code></pre><p>&#x9501;&#x5B9A;&#x6700;&#x540E;&#x4E00;&#x4E2A; selectOne &#x65B9;&#x6CD5;:</p>
<pre class="language-"><code>    public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> selectList(String statement, Object parameter, RowBounds rowBounds) {
        List var5;
        try {
            //&#x83B7;&#x53D6;mapperStatement
            MappedStatement ms = this.configuration.getMappedStatement(statement);
            //&#x6267;&#x884C;&#x5668;&#x6267;&#x884C;
            var5 = this.executor.query(ms, this.wrapCollection(parameter), rowBounds, Executor.NO_RESULT_HANDLER);
        } catch (Exception var9) {
            throw ExceptionFactory.wrapException(&quot;Error querying database.  Cause: &quot; + var9, var9);
        } finally {
            ErrorContext.instance().reset();
        }

        return var5;
    }
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;SQLSession&#x7684;select&#x8FD8;&#x662F;&#x4EE3;&#x7406;&#x5230;Executor&#x7684;query&#x65B9;&#x4E0A;&#x4E86;:</p>
<pre class="language-"><code>    public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler) throws SQLException {
        //&#x83B7;&#x53D6;SQL
        BoundSQL boundSQL = ms.getBoundSQL(parameter);
        //&#x521B;&#x5EFA;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x7684;key,&#x8FD9;&#x4E2A;key&#x975E;&#x5E38;&#x957F;
        CacheKey key = this.createCacheKey(ms, parameter, rowBounds, boundSQL);
        //&#x67E5;&#x8BE2;
        return this.query(ms, parameter, rowBounds, resultHandler, key, boundSQL);
    }
</code></pre><p>&#x7EE7;&#x7EED;&#x6DF1;&#x5165;&#x91CD;&#x8F7D;&#x7684;query&#x65B9;&#x6CD5;:</p>
<pre class="language-"><code>    public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSQL boundSQL) throws SQLException {
        ErrorContext.instance().resource(ms.getResource()).activity(&quot;executing a query&quot;).object(ms.getId());
        if (this.closed) {
            throw new ExecutorException(&quot;Executor was closed.&quot;);
        } else {
            //&#x4E0A;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x67E5;&#x8BE2;&#x5B8C;&#x6210;,&#x5E76;&#x4E14;&#x6807;&#x6CE8;&#x4E86;FlushCache=true&#x7684;&#x5C5E;&#x6027;,&#x90A3;&#x4E48;&#x6E05;&#x7A7A;&#x672C;&#x5730;&#x7F13;&#x5B58;
            if (this.queryStack == 0 &amp;&amp; ms.isFlushCacheRequired()) {
                this.clearLocalCache();
            }

            List list;
            try {
                ++this.queryStack;
                //&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;resultHandler,&#x90A3;&#x4E48;&#x7EBF;&#x7A0B;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x67E5;&#x8BE2;
                list = resultHandler == null ? (List)this.localCache.getObject(key) : null;
                if (list != null) {
                    //&#x5982;&#x679C;&#x6709;&#x7F13;&#x5B58;,&#x5C31;&#x8986;&#x76D6;&#x5F53;&#x524D;&#x53C2;&#x6570;&#x503C;,&#x4F46;&#x53EA;&#x9488;&#x5BF9;CALLABLE
                    this.handleLocallyCachedOutputParameters(ms, key, parameter, boundSQL);
                } else {
                    //&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;
                    list = this.queryFromDatabase(ms, parameter, rowBounds, resultHandler, key, boundSQL);
                }
            } finally {
                --this.queryStack;
            }

            if (this.queryStack == 0) {
                Iterator var8 = this.deferredLoads.iterator();

                while(var8.hasNext()) {
                    BaseExecutor.DeferredLoad deferredLoad = (BaseExecutor.DeferredLoad)var8.next();
                    deferredLoad.load();
                }

                this.deferredLoads.clear();
                //&#x67E5;&#x8BE2;&#x5B8C;&#x6E05;&#x9664;&#x7F13;&#x5B58;
                if (this.configuration.getLocalCacheScope() == LocalCacheScope.STATEMENT) {
                    this.clearLocalCache();
                }
            }

            return list;
        }
    }
</code></pre><p>&#x7EE7;&#x7EED;&#x6DF1;&#x5165; queryFromDatabase &#x65B9;&#x6CD5;,&#x770B;Executor&#x5230;&#x5E95;&#x662F;&#x600E;&#x4E48;&#x67E5;&#x8BE2;&#x7684;:</p>
<pre class="language-"><code>    private <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> queryFromDatabase(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSQL boundSQL) throws SQLException {
        this.localCache.putObject(key, ExecutionPlaceholder.EXECUTION_PLACEHOLDER);

        List list;
        try {
            //&#x53C8;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;,&#x6709;&#x9700;&#x8981;&#x6DF1;&#x5165;
            list = this.doQuery(ms, parameter, rowBounds, resultHandler, boundSQL);
        } finally {
            this.localCache.removeObject(key);
        }

        this.localCache.putObject(key, list);
        if (ms.getStatementType() == StatementType.CALLABLE) {
            this.localOutputParameterCache.putObject(key, parameter);
        }

        return list;
    }
</code></pre><p>&#x7EE7;&#x7EED;&#x770B;doQuery&#x65B9;&#x6CD5;,&#x56E0;&#x4E3A;&#x6211;&#x6CA1;&#x6709;&#x6307;&#x5B9A;Executor&#x7684;&#x7C7B;&#x578B;,&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;doQuery&#x80AF;&#x5B9A;&#x662F;&#x5728;SimpleExecutor&#x4E2D;&#x4E86;:</p>
<pre class="language-"><code>    public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> doQuery(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSQL boundSQL) throws SQLException {
        Statement stmt = null;

        List var9;
        try {
            Configuration configuration = ms.getConfiguration();
            //&#x6765;&#x4E86;,&#x53C8;&#x662F;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;&#x5BF9;&#x8C61;
            StatementHandler handler = configuration.newStatementHandler(this.wrapper, ms, parameter, rowBounds, resultHandler, boundSQL);
            stmt = this.prepareStatement(handler, ms.getStatementLog());
            var9 = handler.query(stmt, resultHandler);
        } finally {
            this.closeStatement(stmt);
        }

        return var9;
    }
</code></pre><p>&#x5728;doQuery&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;Configuration&#x521B;&#x5EFA;&#x4E86;StatementHandler,&#x5B83;&#x662F;SQL&#x7684;&#x5904;&#x7406;&#x5668;,&#x770B;&#x770B;Configuration&#x662F;&#x600E;&#x4E48;&#x521B;&#x5EFA;&#x5B83;&#x7684;:</p>
<pre class="language-"><code>    public StatementHandler newStatementHandler(Executor executor, MappedStatement mappedStatement, Object parameterObject, RowBounds rowBounds, ResultHandler resultHandler, BoundSQL boundSQL) {
        //RoutingStatementHandler
        StatementHandler statementHandler = new RoutingStatementHandler(executor, mappedStatement, parameterObject, rowBounds, resultHandler, boundSQL);
        //&#x518D;&#x6B21;&#x5BF9;&#x63D2;&#x4EF6;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;
        StatementHandler statementHandler = (StatementHandler)this.interceptorChain.pluginAll(statementHandler);
        return statementHandler;
    }
</code></pre><p>&#x4E0A;&#x9762;&#x6700;&#x91CD;&#x8981;&#x7684;&#x521B;&#x5EFA;RoutingStatementHandler&#x90A3;&#x53E5;&#x4EE3;&#x7801;,RoutingStatementHandler&#x662F;&#x4E2A;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;,&#x770B;&#x6837;&#x5B50;&#x5B83;&#x662F;&#x8DEF;&#x7531;&#x7684;StatementHandler,&#x5C82;&#x4E0D;&#x662F;&#x521B;&#x5EFA;&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;StatementHandler:</p>
<pre class="language-"><code>    public RoutingStatementHandler(Executor executor, MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSQL boundSQL) {
        switch(ms.getStatementType()) {
        //&#x666E;&#x901A;&#x7684;StatementHandler
        case STATEMENT:
            this.delegate = new SimpleStatementHandler(executor, ms, parameter, rowBounds, resultHandler, boundSQL);
            break;
        //&#x9884;&#x7F16;&#x8BD1;StatementHandler,&#x4E5F;&#x5C31;&#x662F;&#x9884;&#x7F16;&#x8BD1;&#x7684;SQL
        case PREPARED:
            this.delegate = new PreparedStatementHandler(executor, ms, parameter, rowBounds, resultHandler, boundSQL);
            break;
        //CALLABLE&#x7C7B;&#x578B;&#x7684;StatementHandler
        case CALLABLE:
            this.delegate = new CallableStatementHandler(executor, ms, parameter, rowBounds, resultHandler, boundSQL);
            break;
        default:
            throw new ExecutorException(&quot;Unknown statement type: &quot; + ms.getStatementType());
        }

    }
</code></pre><p>&#x4ECE;RoutingStatementHandler&#x7684;&#x6E90;&#x7801;&#x53EF;&#x77E5;,&#x5B83;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;SQL&#x7684;StatementHandler.</p>
<p>&#x90A3;&#x4E48;&#x521B;&#x5EFA;&#x5B8C;&#x8FD9;&#x4E2A;StatementHandler&#x540E;,&#x6709;&#x5565;&#x7528;&#x5462;&#xFF1F;
&#x56DE;&#x5230;doQuery&#x65B9;&#x6CD5;:</p>
<pre class="language-"><code>    public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> doQuery(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSQL boundSQL) throws SQLException {
        Statement stmt = null;

        List var9;
        try {
            Configuration configuration = ms.getConfiguration();
           //&#x521B;&#x5EFA;StatementHandler
            StatementHandler handler = configuration.newStatementHandler(this.wrapper, ms, parameter, rowBounds, resultHandler, boundSQL);
             //&#x9884;&#x7F16;&#x8BD1;StatemenT    
            stmt = this.prepareStatement(handler, ms.getStatementLog());
            var9 = handler.query(stmt, resultHandler);
        } finally {
            this.closeStatement(stmt);
        }

        return var9;
    }
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x4E00;&#x4E2A; prepareStatement &#x65B9;&#x6CD5;&#x76F4;&#x63A5;&#x9884;&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x4E86;&#x4E00;&#x4E2A;Statement,Statement&#x76F8;&#x4FE1;&#x5404;&#x4F4D;&#x540C;&#x5B66;&#x4E0D;&#x964C;&#x751F;&#x5427;,java&#x539F;&#x751F;&#x7684;SQL&#x64CD;&#x4F5C;&#x554A;,&#x7531;StatementHandler&#x9884;&#x7F16;&#x8BD1;&#x6210;Statement&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x80AF;&#x5B9A;&#x662F;&#x505A;&#x4E9B;&#x4E8B;&#x60C5;&#x7684;,&#x5230;&#x73B0;&#x5728;&#x8FD8;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;&#x5462;,&#x800C;&#x4E14;&#x53C2;&#x6570;&#x4E00;&#x76F4;&#x90FD;&#x968F;&#x7740;&#x90A3;&#x51E0;&#x9897;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre class="language-"><code>   private Statement prepareStatement(StatementHandler handler, Log statementLog) throws SQLException {
        Connection connection = this.getConnection(statementLog);
        Statement stmt = handler.prepare(connection, this.transaction.getTimeout());
         //&#x8BBE;&#x7F6E;&#x53C2;&#x6570;  
        handler.parameterize(stmt);
        return stmt;
    }
</code></pre><p>&#x770B;&#x770B;parameterize&#x662F;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x53C2;&#x6570;&#x7684;&#x5427;:</p>
<pre class="language-"><code>  public void parameterize(Statement statement) throws SQLException {
        //ParameterHandler&#x51FA;&#x6765;&#x4E86;,&#x5B83;&#x65F6;StatementHandler&#x7684;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;,&#x8D1F;&#x8D23;SQL&#x7684;&#x5165;&#x53C2;
        this.parameterHandler.setParameters((PreparedStatement)statement);
    }
</code></pre><p>&#x7EE7;&#x7EED;&#x770B;&#x770B;ParameterHandler&#x662F;&#x5982;&#x4F55;&#x5B8C;&#x6210;&#x5165;&#x53C2;&#x7684;&#x5427;&#xFF1A;</p>
<pre class="language-"><code>   public void setParameters(PreparedStatement ps) {
        ErrorContext.instance().activity(&quot;setting parameters&quot;).object(this.mappedStatement.getParameterMap().getId());

        //&#x4ECE;BoundSQL&#x4E2D;&#x83B7;&#x53D6;ParameterMapping,&#x4E5F;&#x5C31;&#x662F;&#x53C2;&#x6570;
        List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ParameterMapping</span><span class="token punctuation">&gt;</span></span> parameterMappings = this.boundSQL.getParameterMappings();
        if (parameterMappings != null) {
            for(int i = 0; i &lt; parameterMappings.size(); ++i) {
                ParameterMapping parameterMapping = (ParameterMapping)parameterMappings.get(i);
                //&#x5982;&#x679C;&#x53C2;&#x6570;&#x662F;&#x8F93;&#x5165;&#x53C2;&#x6570;
                if (parameterMapping.getMode() != ParameterMode.OUT) {

                    //&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x83B7;&#x53D6;&#x53C2;&#x6570;&#x7684;&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x540D;
                    String propertyName = parameterMapping.getProperty();

                    //&#x53C2;&#x6570;&#x503C;
                    Object value;
                    //&#x83B7;&#x53D6;&#x53C2;&#x6570;&#x503C;
                    if (this.boundSQL.hasAdditionalParameter(propertyName)) {
                        value = this.boundSQL.getAdditionalParameter(propertyName);
                    } else if (this.parameterObject == null) {
                        value = null;

                    //&#x5982;&#x679C; TypeHandler&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x503C;&#x7684;&#x7C7B;&#x578B;
                    } else if (this.typeHandlerRegistry.hasTypeHandler(this.parameterObject.getClass())) {
                        value = this.parameterObject;
                    } else {
                        MetaObject metaObject = this.configuration.newMetaObject(this.parameterObject);
                        value = metaObject.getValue(propertyName);
                    }

                    TypeHandler typeHandler = parameterMapping.getTypeHandler();
                    JdbcType jdbcType = parameterMapping.getJdbcType();
                    if (value == null &amp;&amp; jdbcType == null) {
                        jdbcType = this.configuration.getJdbcTypeForNull();
                    }

                    try {
                        //TypeHandler&#x8BBE;&#x7F6E;&#x53C2;&#x6570;,&#x5185;&#x90E8;&#x4ECD;&#x7136;&#x662F;Statement&#x8BBE;&#x7F6E;&#x53C2;&#x6570;
                        typeHandler.setParameter(ps, i + 1, value, jdbcType);
                    } catch (SQLException | TypeException var10) {
                        throw new TypeException(&quot;Could not set parameters for mapping: &quot; + parameterMapping + &quot;. Cause: &quot; + var10, var10);
                    }
                }
            }
        }

    }
</code></pre><p>&#x4E0A;&#x9762;&#x8BBE;&#x7F6E;&#x5B8C;&#x53C2;&#x6570;&#x540E;,&#x56DE;&#x5230;doQuery&#x65B9;&#x6CD5;,&#x4F7F;&#x7528;StatementHandler&#x7684;query&#x65B9;&#x6CD5;&#x6267;&#x884C;:</p>
<pre class="language-"><code>  public <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span> query(Statement statement, ResultHandler resultHandler) throws SQLException {
        PreparedStatement ps = (PreparedStatement)statement;
        //&#x6267;&#x884C;
        ps.execute();
        //&#x5904;&#x7406;&#x7ED3;&#x679C;&#x96C6;
        return this.resultSetHandler.handleResultSets(ps);
    }
</code></pre><p>&#x6700;&#x540E;&#x770B;&#x770B;ResultSetHandler&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x96C6;&#x7684;&#x5427;:</p>
<pre class="language-"><code>  public List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Object</span><span class="token punctuation">&gt;</span></span> handleResultSets(Statement stmt) throws SQLException {
        ErrorContext.instance().activity(&quot;handling results&quot;).object(this.mappedStatement.getId());
        List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Object</span><span class="token punctuation">&gt;</span></span> multipleResults = new ArrayList();
        int resultSetCount = 0;

        //&#x83B7;&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;
        ResultSetWrapper rsw = this.getFirstResultSet(stmt);
        List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ResultMap</span><span class="token punctuation">&gt;</span></span> resultMaps = this.mappedStatement.getResultMaps();
        int resultMapCount = resultMaps.size();
        this.validateResultMapsCount(rsw, resultMapCount);
        //&#x4E00;&#x4E2A;resultMap&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;,&#x4E0D;&#x65AD;&#x904D;&#x5386;
        while(rsw != null &amp;&amp; resultMapCount &gt; resultSetCount) {
            ResultMap resultMap = (ResultMap)resultMaps.get(resultSetCount);
            //&#x5904;&#x7406;&#x7ED3;&#x679C;&#x96C6;
            this.handleResultSet(rsw, resultMap, multipleResults, (ResultMapping)null);
            //&#x83B7;&#x53D6;&#x4E0B;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x96C6;
            rsw = this.getNextResultSet(stmt);
            this.cleanUpAfterHandlingResultSet();
            ++resultSetCount;
        }

        String[] resultSets = this.mappedStatement.getResultSets();
        if (resultSets != null) {
            while(rsw != null &amp;&amp; resultSetCount &lt; resultSets.length) {
                ResultMapping parentMapping = (ResultMapping)this.nextResultMaps.get(resultSets[resultSetCount]);
                if (parentMapping != null) {
                    String nestedResultMapId = parentMapping.getNestedResultMapId();
                    ResultMap resultMap = this.configuration.getResultMap(nestedResultMapId);
                    this.handleResultSet(rsw, resultMap, (List)null, parentMapping);
                }

                rsw = this.getNextResultSet(stmt);
                this.cleanUpAfterHandlingResultSet();
                ++resultSetCount;
            }
        }

        return this.collapseSingleResultList(multipleResults);
    }
</code></pre><p>&#x7B97;&#x662F;&#x5B8C;&#x6210;&#x4E86;&#x5BF9;mybatis&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6E90;&#x7801;&#x5206;&#x6790;&#x5427;,&#x7531;&#x4E8E;&#x6211;&#x529F;&#x529B;&#x6D45;&#x8584;,
&#x5373;&#x4F7F;&#x662F;&#x5206;&#x6790;&#x51FA;&#x6765;&#x4E86;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x5927;&#x81F4;&#x7684;&#x8FD0;&#x884C;&#x6D41;&#x7A0B;,&#x5176;&#x4E2D;&#x7684;&#x5927;&#x90E8;&#x5206;&#x7EC6;&#x8282;&#x6211;&#x4ECD;&#x7136;&#x662F;&#x4E0D;&#x61C2;&#x7684;,&#x6240;&#x4EE5;&#x6211;&#x4F1A;&#x7EE7;&#x7EED;&#x5B66;&#x4E60;.</p>
<h4 id="mybatis&#x6E90;&#x7801;&#x603B;&#x7ED3;">mybatis&#x6E90;&#x7801;&#x603B;&#x7ED3;</h4>
<p>Mybatis&#x6700;&#x6838;&#x5FC3;&#x7684;&#x5BF9;&#x8C61;&#x83AB;&#x8FC7;&#x4E8E;Configuration&#x4E86;,
Configuration&#x5728;&#x89E3;&#x6790;&#x5B8C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C;mapper&#x6587;&#x4EF6;&#x540E;&#x5C31;&#x4E00;&#x76F4;&#x6D41;&#x8F6C;&#x4E8E;&#x6574;&#x4E2A;mybatis&#x6267;&#x884C;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5185;&#x3002;</p>
<p>&#x9996;&#x5148;&#x7531;Configuration&#x521B;&#x5EFA;&#x51FA;Executor,&#x4ECE;&#x800C;&#x521B;&#x5EFA;DefaultSQLSession,
&#x53C8;&#x7531;Configuration&#x5185;&#x7684;MapperRegistry&#x83B7;&#x53D6;MapperProxy&#x5BF9;&#x8C61;,&#x6267;&#x884C;SQL&#x7684;&#x65F6;&#x5019;,
&#x4E5F;&#x7531;Configuration&#x521B;&#x5EFA;StatementHandler,&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x8BF4;Configuration&#x662F;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#x3002;</p>
<hr>
<p>&#x7136;&#x540E;&#x8BF4;&#x4E0B;Mybatis&#x6838;&#x5FC3;&#x7684;&#x7EC4;&#x4EF6;:Executor&#x3002;</p>
<p>&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;StatementHandler&#x3002;
StatementHandler&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;ParameterHandler&#x5BF9;Statement
&#x8FDB;&#x884C;&#x53C2;&#x6570;&#x5904;&#x7406;,&#x6267;&#x884C;Statement&#x8C03;&#x7528;ResultSetHandler&#x5BF9;SQL&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x505A;&#x51FA;&#x5C01;&#x88C5;&#x3002;</p>
<p>ParameterHandler&#x8D1F;&#x8D23;Statement&#x7684;&#x53C2;&#x6570;&#x5904;&#x7406;,
ResultSetHandler&#x8D1F;&#x8D23;Statement&#x6267;&#x884C;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x96C6;&#x5904;&#x7406;.</p>
<p>&#x5728;&#x5206;&#x6790;mybatis&#x6E90;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;,&#x6211;&#x89C9;&#x5F97;mybatis&#x6574;&#x4E2A;&#x6846;&#x67B6;&#x7684;&#x8BBE;&#x8BA1;&#x548C;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x601D;&#x60F3;&#x662F;&#x53D1;&#x6325;&#x7684;&#x6DCB;&#x6F13;&#x5C3D;&#x81F4;&#x7684;&#x3002;</p>
<p>&#x5176;&#x5B9E;&#x6709;&#x5F88;&#x591A;&#x4EBA;&#x8BF4;mybatis&#x4E0D;&#x591F;&#x667A;&#x80FD;&#x5316;,&#x4F46;&#x662F;&#x6211;&#x60F3;&#x8BF4;&#x7684;&#x662F;,
Mybatis&#x5E2E;&#x6211;&#x4EEC;&#x505A;&#x6389;&#x8FD9;&#x4E48;&#x591A;&#x7E41;&#x7410;&#x7684;&#x4E8B;&#x60C5;,&#x8FD8;&#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x7075;&#x6D3B;&#x7684;&#x638C;&#x63E1;SQL&#xFF0C;&#x5728;&#x8BBE;&#x8BA1;&#x4E0A;&#x5B9E;&#x5C5E;np&#x3002;
&#x542C;&#x8BF4;Hibernate&#x4E0D;&#x9700;&#x8981;&#x5199;SQL,&#x6211;&#x6CA1;&#x5B66;&#x8FC7;,&#x4E0D;&#x597D;&#x5984;&#x4E0B;&#x5B9A;&#x8BBA;&#x3002;
&#x4F46;&#x662F;&#x6211;&#x89C9;&#x5F97;SQL&#x672C;&#x8EAB;&#x5C31;&#x4E0D;&#x5C5E;&#x4E8E;Java&#x8BED;&#x8A00;&#x8FD9;&#x4E2A;&#x8303;&#x7574;,<strong>&#x5982;&#x679C;&#x8FDE;SQL&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x5199;,&#x662F;&#x4EC0;&#x4E48;ORM&#x6846;&#x67B6;,&#x53C8;&#x600E;&#x4E48;&#x8C08;SQL&#x4F18;&#x5316;&#x5462;?</strong></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Mybatis常见知识点.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Mybatis常见知识点">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Mybatis源码分析","level":"7.1.2.2","depth":3,"previous":{"title":"Mybatis常见知识点","level":"7.1.2.1","depth":3,"path":"gitbook_doc/orm-learning/Mybatis常见知识点.md","ref":"gitbook_doc/orm-learning/Mybatis常见知识点.md","articles":[]},"dir":"ltr"},"config":{"plugins":["back-to-top-button","expandable-chapters","code","prism","github","github-buttons","splitter","pageview-count","lightbox","theme-comscore","-lunr","-search","search-pro","sitemap","simple-page-toc","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/guang19/framework-learning"},"livereload":{},"simple-page-toc":{"maxDepth":4,"skipFirstH1":false},"splitter":{},"search-pro":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sitemap":{"hostname":"https://github.com/guang19/framework-learning"},"lightbox":{"jquery":true,"sameUuid":false},"theme-comscore":{},"back-to-top-button":{},"pageview-count":{},"github-buttons":{"buttons":[{"user":"guang19","repo":"framework-learning","type":"star","size":"small"},{"user":"guang19","repo":"framework-learning","type":"fork","size":"small"},{"user":"guang19","type":"follow","width":"230","size":"small"}]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author:":"qsjzwithguang19forever","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"framework-learning","language":"zh-hans","links":{"sidebar":{}},"gitbook":"*","description":"Java方向的开发者学习的资料"},"file":{"path":"gitbook_doc/orm-learning/Mybatis源码分析.md","mtime":"2020-03-25T10:56:50.963Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-25T12:32:20.486Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lightbox/js/lightbox.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

